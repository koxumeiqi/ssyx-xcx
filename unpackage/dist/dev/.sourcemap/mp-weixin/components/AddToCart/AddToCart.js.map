{"version":3,"sources":["webpack:///E:/BaiduNetdiskDownload/尚上优选/代码/02-微信小程序代码/atguigu-tuan/components/AddToCart/AddToCart.vue?01af","webpack:///E:/BaiduNetdiskDownload/尚上优选/代码/02-微信小程序代码/atguigu-tuan/components/AddToCart/AddToCart.vue?74fd","webpack:///E:/BaiduNetdiskDownload/尚上优选/代码/02-微信小程序代码/atguigu-tuan/components/AddToCart/AddToCart.vue?6df7","webpack:///E:/BaiduNetdiskDownload/尚上优选/代码/02-微信小程序代码/atguigu-tuan/components/AddToCart/AddToCart.vue?6da5","uni-app:///components/AddToCart/AddToCart.vue"],"names":["name","data","id","isCart","showConfirmModal","props","shopDetail","type","default","skuId","computed","getCheckProductExists","skuNumValue","get","set","getMax","perLimit","methods","addShopCart","changeSkuNumMinus","value","currentBuyNum","changeSkuNumPlus","modalConfirm","modalCancel","watch","handler","immediate"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC0BzqB;AAAA;AAAA;AAAA,gBACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACA;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE,0CACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACAC;QACA;MACA;MACAC,0BACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA;IACA;EAAA,EACA;EACAC,yCACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;UAAAV;UAAAW;UAAAC;UAAAlB;QAAA;MACA;IAEA;IACA;IACAmB;MACA;QAAAb;QAAAW;QAAAC;QAAAlB;MAAA;IACA;IACA;IACAoB;MACA;MACA;QAAAd;QAAAW;QAAAC;QAAAlB;MAAA;IACA;IACA;IACAqB;MACA;MACA;MACA;IACA;EAAA,EACA;EACAC;IACA;IACAhB;MACAiB;QACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;MACAC;IACA;EACA;AACA;AAAA,4B","file":"components/AddToCart/AddToCart.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./AddToCart.vue?vue&type=template&id=ae471b04&\"\nvar renderjs\nimport script from \"./AddToCart.vue?vue&type=script&lang=js&\"\nexport * from \"./AddToCart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/AddToCart/AddToCart.vue\"\nexport default component.exports","export * from \"-!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AddToCart.vue?vue&type=template&id=ae471b04&\"","var components\ntry {\n  components = {\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-modal/u-modal\" */ \"uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AddToCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\fore end\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./AddToCart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\n\t\t<!-- 如果商品没有加入购物车 -->\r\n\t\t<block v-if=\"getCheckProductExists\"><u-button type=\"warning\" size=\"mini\" @click=\"addShopCart\">加入购物车</u-button></block>\r\n\t\t<block v-else>\r\n\t\t\t<u-number-box\r\n\t\t\t\tref=\"uNumber\"\r\n\t\t\t\t:size=\"20\"\r\n\t\t\t\t:input-width=\"60\"\r\n\t\t\t\t:input-height=\"40\"\r\n\t\t\t\t:disabled-input=\"true\"\r\n\t\t\t\t@minus=\"changeSkuNumMinus\"\r\n\t\t\t\t@plus=\"changeSkuNumPlus\"\r\n\t\t\t\tv-model=\"skuNumValue\"\n\t\t\t\t:min=\"0\"\n\t\t\t\t:max=\"getMax\"\n\t\t\t></u-number-box>\r\n\t\t</block>\n\t\t\n\t\t<u-modal v-model=\"showConfirmModal\" @confirm=\"modalConfirm\" @cancel=\"modalCancel\" :show-cancel-button=\"true\" ref=\"confirmModal\" :async-close=\"true\">\n\t\t\t<view class=\"u-flex u-row-center u-m-20\">确认删除该商品？</view>\n\t\t</u-modal>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\nexport default {\r\n\tname: 'AddToCart',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tid: 0,\n\t\t\tisCart: false,\n\t\t\tshowConfirmModal: false\n\t\t};\r\n\t},\r\n\tprops: {\r\n\t\tshopDetail: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 在购物车页面的时候，使用带活动的购物车将传递的不再是商品的id\r\n\t\t// 商品详情信息中没有id，而是skuId\r\n\t\tskuId: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: null\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters('cartModule', ['checkProductExists','getProductSkuNum']),\n\t\t// 检查是否存在商品于购物车\r\n\t\tgetCheckProductExists() {\r\n\t\t\treturn !this.checkProductExists(this.id);\r\n\t\t},\n\t\t// 商品加入购物车的数量\n\t\tskuNumValue: {\n\t\t\tget() {\n\t\t\t\treturn this.getProductSkuNum(this.id);\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t}\n\t\t},\n\t\t// 最大可加入购物车的数量\n\t\tgetMax(){\n\t\t\tlet perLimit = this.shopDetail.perLimit;\n\t\t\t// 秒杀商品与普通商品购买上限判断字段不同\n\t\t\tif(this.shopDetail.skuType ===1){\n\t\t\t\tperLimit = this.shopDetail.seckillSkuVo && this.shopDetail.seckillSkuVo.seckillLimit\n\t\t\t}\n\t\t\treturn perLimit;\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('cartModule', ['addShopAction', 'changeSkuNumAction']),\r\n\t\t// 添加到购物车\r\n\t\taddShopCart() {\r\n\t\t\tif (this.skuId) {\r\n\t\t\t\tthis.shopDetail.id = this.skuId;\r\n\t\t\t}\r\n\t\t\tthis.addShopAction(this.shopDetail);\r\n\t\t},\r\n\t\t// 购物车数量递减\r\n\t\tchangeSkuNumMinus(e) {\r\n\t\t\t// 如果是购物车中进行递减操作，并且购物车数量为0，那么需要弹出确认框\n\t\t\tif (e.value < 1 && this.isCart) {\n\t\t\t\tthis.showConfirmModal = true;\n\t\t\t} else {\n\t\t\t\tthis.changeSkuNumAction({ skuId: this.id, value: -1, currentBuyNum: e.value, isCart: this.isCart });\n\t\t\t}\n\t\t\t\r\n\t\t},\r\n\t\t// 购物车数量递增\r\n\t\tchangeSkuNumPlus(e) {\r\n\t\t\tthis.changeSkuNumAction({ skuId: this.id, value: 1, currentBuyNum: e.value,isCart: this.isCart });\r\n\t\t},\n\t\t// 确认删除商品模态框\n\t\tmodalConfirm() {\n\t\t\tthis.showConfirmModal = false;\n\t\t\tthis.changeSkuNumAction({ skuId: this.id, value: -1, currentBuyNum: 0, isCart: this.isCart });\n\t\t},\n\t\t// 取消删除商品模态框，只需要将商品购买数修改回初始值\n\t\tmodalCancel() {\n\t\t\tthis.showConfirmModal = false;\n\t\t\t// 重新设置u-number-box的初始值\n\t\t\tthis.$refs.uNumber.$data.inputVal = 1;\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\t// skuId是在购物车频道使用，如果是商品列表，是id\r\n\t\tskuId: {\r\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tthis.id = newVal;\n\t\t\t\t\tthis.isCart = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.id = this.shopDetail.id;\n\t\t\t\t\tthis.isCart = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\n"],"sourceRoot":""}